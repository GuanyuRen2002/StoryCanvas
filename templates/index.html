<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StoryCanvas</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <!-- 左侧聊天区域 -->
        <div class="chat-section">
            <div class="chat-header">
                <h2>StoryCanvas</h2>
                <p></p>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="message bot-message">
                    <div class="avatar bot-avatar">🤖</div>
                    <div class="message-content">
                        <p>你好！我是StoryCanvas智能绘本生成器。请告诉我你想要创作什么样的故事？</p>
                        <p>我可以帮你生成包含10页内容的完整绘本，每页都有精美的插图哦！</p>
                    </div>
                </div>
            </div>
            
            <div class="input-section">
                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <textarea 
                            id="userInput" 
                            class="chat-input" 
                            placeholder="告诉我你想要什么样的故事吧！比如：我想要一个关于小兔子冒险的故事..."
                            rows="3"
                        ></textarea>
                        <button type="button" id="sendBtn" class="send-btn">
                            <span class="send-icon">🚀</span>
                        </button>
                    </div>
                    <!-- 画风选择器 -->
                    <div class="style-selector-container" id="styleSelectorContainer">
                        <div class="style-selector-header" id="styleSelectorHeader">
                            <div class="style-header-left">
                                <span class="style-icon">🎨</span>
                                <span class="style-label">选择画风</span>
                            </div>
                            <span class="style-expand-icon">▼</span>
                        </div>
                        
                        <!-- 当前选中画风显示 -->
                        <div class="current-style-display" id="currentStyleDisplay">
                            <div class="current-style-preview" id="currentStylePreview">🖼️</div>
                            <div class="current-style-info">
                                <div class="current-style-name" id="currentStyleName">儿童绘本</div>
                                <div class="current-style-desc" id="currentStyleDesc">温馨水彩风格</div>
                            </div>
                        </div>
                        
                        <div class="style-options" id="styleOptions">
                            <div class="style-options-grid">
                                <div class="style-option active" data-style="default">
                                    <div class="style-preview">🖼️</div>
                                    <span class="style-name">儿童绘本</span>
                                    <span class="style-desc">温馨水彩风格</span>
                                </div>
                                <div class="style-option" data-style="photography">
                                    <div class="style-preview">📸</div>
                                    <span class="style-name">摄影写实</span>
                                    <span class="style-desc">逼真的图像</span>
                                </div>
                                <div class="style-option" data-style="concept-art">
                                    <div class="style-preview">🔮</div>
                                    <span class="style-name">概念艺术</span>
                                    <span class="style-desc">幻想科幻风格</span>
                                </div>
                                <div class="style-option" data-style="cartoon">
                                    <div class="style-preview">🎭</div>
                                    <span class="style-name">卡通漫画</span>
                                    <span class="style-desc">动画风格</span>
                                </div>
                                <div class="style-option" data-style="painting">
                                    <div class="style-preview">🎨</div>
                                    <span class="style-name">艺术绘画</span>
                                    <span class="style-desc">油画水彩风格</span>
                                </div>
                                <div class="style-option" data-style="pixel-art">
                                    <div class="style-preview">🕹️</div>
                                    <span class="style-name">像素艺术</span>
                                    <span class="style-desc">复古游戏风格</span>
                                </div>
                                <div class="style-option" data-style="cyberpunk">
                                    <div class="style-preview">🌃</div>
                                    <span class="style-name">赛博朋克</span>
                                    <span class="style-desc">未来科幻风格</span>
                                </div>
                                <div class="style-option" data-style="low-poly">
                                    <div class="style-preview">💎</div>
                                    <span class="style-name">低多边形</span>
                                    <span class="style-desc">几何艺术风格</span>
                                </div>
                                <div class="style-option" data-style="paper-art">
                                    <div class="style-preview">📄</div>
                                    <span class="style-name">剪纸艺术</span>
                                    <span class="style-desc">纸艺折纸风格</span>
                                </div>
                                <div class="style-option" data-style="miyazaki">
                                    <div class="style-preview">🌸</div>
                                    <span class="style-name">宫崎骏风格</span>
                                    <span class="style-desc">梦幻自然童话风</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="input-hint">
                        <p>💡 你可以告诉我：</p>
                        <ul>
                            <li>想要什么主题的故事（勇气、友谊、冒险...）</li>
                            <li>喜欢什么角色（小动物、超级英雄、公主...）</li>
                            <li>想要什么场景（森林、城堡、太空...）</li>
                            <li>或者就说"给我一个好故事"，让我自由发挥！</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 右侧绘本展示区域 -->
        <div class="storybook-section">
            <div class="storybook-header">
                <h3>我的绘本</h3>
                <div class="storybook-controls">
                    <button id="prevBtn" class="nav-btn" disabled>←</button>
                    <span id="pageIndicator">封面</span>
                    <button id="nextBtn" class="nav-btn" disabled>→</button>
                    <div class="audio-controls">
                        <button id="playBtn" class="audio-btn" title="播放/暂停朗读" disabled>🔊</button>
                        <button id="autoPlayBtn" class="audio-btn" title="自动朗读全书" disabled>📖</button>
                    </div>
                    <button id="refreshBtn" class="refresh-btn" title="从日志刷新绘本内容">🔄</button>
                    <button id="exportBtn" class="export-btn" style="display: none;">导出PDF</button>
                </div>
            </div>
            
            <div class="storybook-content" id="storybookContent">
                <div class="storybook-placeholder">
                    <div class="placeholder-icon">📚</div>
                    <p>请在左侧输入故事信息开始创作您的绘本</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 加载提示 -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>正在生成您的绘本...</p>
            <p class="loading-detail" id="loadingDetail">准备中...</p>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>